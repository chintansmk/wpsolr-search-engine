<script>
    jQuery(document).ready(function () {

        // Init facets
        jQuery(".{{ ui_id }} .wpsolr_any_facet_class li .{{ facet_selector_class }}.checked").each(function () {
            var facet = jQuery(this).data("wpsolr-facet-item-value"); // facet value stored in html5 data
            wpsolr_components["{{ ui_id }}"].addFacetValue(facet); // add facet to facets
        });

        jQuery(".{{ ui_id }} .wpsolr_any_facet_class li .{{ facet_selector_class }}").on("click", function (event) {

            var facet = jQuery(this).data("wpsolr-facet-item-value"); // facet value stored in html5 data
            if (facet.count > 0) {
                jQuery(".{{ ui_id }} .wpsolr_any_facet_class li .{{ facet_selector_class }}").not(this).removeClass("{{ facet_selected_class }}"); // Deactivate all facets, except current
                jQuery(this).toggleClass("{{ facet_selected_class }}"); // Activate clicked facet

                wpsolr_components["{{ ui_id }}"].removeFacetValue({
                    "facet_id": facet.facet_id,
                    "facet_type": facet.facet_type
                }); // Remove all elements of the facet
                if (jQuery(this).hasClass("{{ facet_selected_class }}")) {
                    wpsolr_components["{{ ui_id }}"].addFacetValue(facet); // add facet element if selected
                }
                wpsolr_components["{{ ui_id }}"].updateLastFacetSelected(facet); // Add current selection to url
                wpsolr_components["{{ ui_id }}"].create_url(facet.facet_delay_in_ms); // Generate new url and redirect
            }
        });
    });
</script>
