<script>
    jQuery(document).ready(function () {

        // Init facets
        jQuery(".wpsolr_any_facet_class li .{{ facet_selector_class }} :selected").each(function () {

            var facet = jQuery(this).data("wpsolr-facet-item-value"); // facet value stored in html5 data
            wpsolr_components["{{ ui_id }}"].addFacetValue(facet); // add facet to facets
        });

        jQuery(".wpsolr_any_facet_class li .{{ facet_selector_class }} option").mousedown(function (event) {

            var $self = jQuery(this);

            if ($self.attr("selected")) {

                $self.removeAttr("selected");

            } else {

                $self.attr("selected", "selected");
            }

            {# Update url #}
            var facet = $self.data("wpsolr-facet-item-value"); // facet value stored in html5 data
            wpsolr_components["{{ ui_id }}"].toggleFacetValue(facet); // Toogle facet

            wpsolr_components["{{ ui_id }}"].updateLastFacetSelected(facet); // Add current selection to url
            wpsolr_components["{{ ui_id }}"].create_url(facet.facet_delay_in_ms);

        });

    });
</script>
